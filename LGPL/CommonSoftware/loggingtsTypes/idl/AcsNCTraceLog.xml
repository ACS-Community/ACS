<?xml version="1.0" encoding="ISO-8859-1"?>
<LogDefinitionType xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="Alma/ACSLogTS"	
	name="AcsNCTraceLog" 
	type="10"
	shortDescription="ACS trace logs for interaction with notification services/channels"
	description="ACS uses these messages to log notification service related activities such as creating channels, subscribing to a channel etc." 
	_prefix="alma" 
	>
	
	<!-- =========== Required TAO extensions are not enabled =========== -->
	<LogDefinition
		logName="LOG_NC_TaoExtensionsSubtypeMissing"
		shortDescription="TAO extensions are not enabled."
		description="TAO extensions are not enabled. Since ACS 8.0, we require the NotifyService to offer the TAO specific extensions. Without those, we would need to program our own NC manager to prevent race conditions and to keep track of names and clients."
		priority="ERROR"
		audience="Developer">
		<Member name="ObjectName" type="string" description="An optional name of the factory, channel, admin object etc which does not have the expected type." />
		<Member name="ExpectedType" type="string" description="Expected TAO extension IDL type, e.g. 'IDL:sandia.gov/NotifyMonitoringExt/EventChannelFactory:1.0'" />
		<Member name="ActualType" type="string" description="Actual IDL type, e.g. 'IDL:omg.org/CosNotifyChannelAdmin/EventChannelFactory:1.0'" />
		<!-- Member name="Service" type="string" description="Name or ID of the notification service." / -->
	</LogDefinition>
	
	
	<!-- =========== Channel lifecycle =========== -->

	<LogDefinition
		logName="LOG_NC_ChannelCreated_ATTEMPT"
		shortDescription="About to create a notification channel"
		description="About to create a notification channel"
		priority="TRACE"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel to be created." />
		<Member name="Service" type="string" description="Name or ID of the notification service that should host the channel." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_ChannelCreated_OK"
		shortDescription="Successfully created a notification channel"
		description="Successfully created a notification channel"
		priority="INFO"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel created." />
		<Member name="ChannelId" type="long" description="ID of the channel created." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
	</LogDefinition>
	
	<!-- @TODO: FIGURE OUT IF WE ACTUALLY (SHOULD) DESTROY NCs. IN JAVA THIS FEATURE IS NOT USED IN PRACTICE AS OF ALMA-5_0_1_9 -->
	<LogDefinition
		logName="LOG_NC_ChannelDestroyed_OK"
		shortDescription="Successfully destroyed a notification channel"
		description="Successfully destroyed a notification channel"
		priority="INFO"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel destroyed." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosted the channel." />
	</LogDefinition>
	
	<!-- =========== Channel connection objects =========== -->
	 
	<LogDefinition
		logName="LOG_NC_ConsumerAdminObtained_OK"
		shortDescription="Successfully obtained a notification channel consumer admin object."
		description="Successfully obtained a notification channel consumer admin object, through creation or reuse."
		priority="TRACE"
		audience="Developer">
		<Member name="ConsumerAdminId" type="long" description="ID of the admin object created." />
		<Member name="CreatedOrReused" type="string" description="'created' if admin object was created, 'reused' if an existing admin object was reused." />
		<Member name="ClientName" type="string" description="Name of the client that created the consumer admin." />
		<Member name="ChannelName" type="string" description="Name of the channel for which the ConsumerAdmin was created." />
		<Member name="Service" type="string" description="Name or ID of the notification service that should host the channel." />
	</LogDefinition>
	

	<!-- =========== Channel subscriptions =========== -->
	
	<LogDefinition
		logName="LOG_NC_SubscriptionConnect_OK"
		shortDescription="Successfully connected to a notification channel"
		description="Successfully connected to a notification channel"
		priority="DEBUG"
		audience="Developer">
		<!-- Member name="Subscriber" type="string" description="Name of the subscriber component or tool." / -->
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_SubscriptionConnect_FAIL"
		shortDescription="Failed connecting to a notification channel"
		description="Failed connecting to a notification channel"
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel not subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
	</LogDefinition>

	<LogDefinition
		logName="LOG_NC_SubscriptionDisconnect_OK"
		shortDescription="Disconnected from a notification channel"
		description="Disconnected from a notification channel"
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_SubscriptionDisconnect_FAIL"
		shortDescription="Failed to disconnect from a notification channel"
		description="Failed to disconnect from a notification channel. Perhaps resources could not be deallocated."
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
	</LogDefinition>
	
	<!-- =========== Event processing =========== -->
	
	<LogDefinition
		logName="LOG_NC_EventReceive_OK"
		shortDescription="Event successfully received, ready to be processed"
		description="Event successfully received, ready to be processed. The NC libraries will only log this message if the CDB enables event tracing for the particular channel, see 'IntegrationLogs' defined in EventChannel.xsd"
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
		<Member name="EventName" type="string" description="Name of the processed event." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_EventReceive_FAIL"
		shortDescription="Received a corrupted event, which will not be processed."
		description="Received a corrupted event whose data was null or not a subtype of IDLEntity. Thus this event cannot be processed."
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
		<Member name="EventName" type="string" description="Name of the processed event." />
		<Member name="EventDataType" type="string" description="The offending event data type, or 'null'" />
	</LogDefinition>	

	<LogDefinition
		logName="LOG_NC_EventReceive_NoHandler"
		shortDescription="Event will be ignored because no registered receiver was found."
		description="An event was properly received, but no registered receiver was found, thus ACS will ignore this event. NC libs must carefully check whether event type filtering should be done in the NotifyService (then this is serious) or in the subscriber libraries (then this is normal), and adjust log level or use repeat guards accordingly."
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
		<Member name="EventName" type="string" description="Name of the processed event." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_EventReceive_HandlerException"
		shortDescription="The registered event handler illegally threw an exception."
		description="Event handlers are not allowed to throw exceptions when they fail for whatever reason. If they do nonetheless, you see this log."
		priority="DEBUG"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
		<Member name="EventName" type="string" description="Name of the processed event." />
		<Member name="HandlerClass" type="string" description="The receiver class that let the exception fly through." />
		<Member name="ExceptionData" type="string" description="Data about the caught exception." />
	</LogDefinition>
	
	<LogDefinition
		logName="LOG_NC_ProcessingTimeExceeded"
		shortDescription="Took too long to process an event"
		description="Took too long to process an event, considering the maxProcessTime attribute from the EventChannel schema."
		priority="WARNING"
		audience="Developer">
		<Member name="ChannelName" type="string" description="Name of the channel subscribed to." />
		<Member name="Service" type="string" description="Name or ID of the notification service that hosts the channel." />
		<Member name="EventName" type="string" description="Name of the processed event." />
		<Member name="LogOcurrencesNumber" type="long" description="Amount of discarded messages since the last call (repeat guard applied)." />
	</LogDefinition>
	
	
</LogDefinitionType>

