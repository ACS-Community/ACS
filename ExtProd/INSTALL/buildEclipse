#! /bin/bash
#*******************************************************************************
# E.S.O. - ALMA project
#
# "@(#) $Id: buildEclipse,v 1.1 2009/10/05 16:29:57 jschwarz Exp $"
#
# who       when        what
# --------  ----------  ----------------------------------------------
# jschwarz    06/10/2009

# Load functions
. standardUtilities
#
# Fetch operating system and release version
#
os_discovery

LOG=buildEclipse.log
exec > $LOG 2>&1

date

CURR_DIR=`pwd`

if [ "$OS" = "LINUX" ]
then 
  OSTAG=linux
else
  echo "OS $OS not supported"
  exit -1
fi

echo "Installing Eclipse for $OSTAG"
echo 

TOPDIR=$ALMASW_ROOTDIR/$ALMASW_RELEASE/Eclipse
if [ -d $TOPDIR ]
then
  echo $TOPDIR directory exists already. I clean it up.
  rm -rf $TOPDIR
fi
SDKDIR=$TOPDIR/SDK
DELTAPACKDIR=$TOPDIR/DeltaPack
RCPSDKDIR=$TOPDIR/RCP-SDK
RCPBINDIR=$TOPDIR/RCP-BIN
mkdir $TOPDIR
mkdir $SDKDIR
mkdir $DELTAPACKDIR
mkdir $RCPSDKDIR
mkdir $RCPBINDIR

#
# Unpack the tar file
# put the sources under $ALMASW_ROOTDIR/$ALMASW_RELEASE/Eclipse
#
VERSION=3.5.1
echo "unpacking the archives for Eclipse "$VERSION
SDKFILE=$CURR_DIR/../PRODUCTS/eclipse-SDK-$VERSION-linux-gtk.tar.gz
cd $SDKDIR
tar zxf $SDKFILE
DELTAPACKFILE=$CURR_DIR/../PRODUCTS/eclipse-$VERSION-delta-pack.zip
cd $DELTAPACKDIR
unzip $DELTAPACKFILE
RCPSDKFILE=$CURR_DIR/../PRODUCTS/eclipse-RCP-SDK-$VERSION-linux-gtk.tar.gz
cd $RCPSDKDIR
tar zxf $RCPSDKFILE
RCPBINFILE=$CURR_DIR/../PRODUCTS/eclipse-RCP-$VERSION-linux-gtk.tar.gz
cd $RCPBINDIR
tar zxf $RCPBINFILE
echo "done"
echo ""


cd $CURR_DIR
echo Eclipse installation done
date

