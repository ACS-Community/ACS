diff -Naur TAO.org/ACE_wrappers/TAO/TAO_IDL/be/be_codegen.cpp TAO/ACE_wrappers/TAO/TAO_IDL/be/be_codegen.cpp
--- TAO.org/ACE_wrappers/TAO/TAO_IDL/be/be_codegen.cpp	2010-03-24 18:49:36.000000000 +0000
+++ TAO/ACE_wrappers/TAO/TAO_IDL/be/be_codegen.cpp	2010-06-24 07:12:02.000000000 +0000
@@ -2284,10 +2284,14 @@
         }
     }
 
-  ACE_OS::strcat (macro_name, "_XXXXXX");
-  char * const t = ACE_OS::strstr (macro_name, "XXXXXX");
-
-  this->make_rand_extension (t);
+  // do we have to generate unique guards ?
+  if (be_global->gen_unique_guards ())
+    {
+    ACE_OS::strcat (macro_name, "_XXXXXX");
+    char * const t = ACE_OS::strstr (macro_name, "XXXXXX");
+    
+    this->make_rand_extension (t);
+    }
 
   ACE_OS::strcat (macro_name, suffix);
 
diff -Naur TAO.org/ACE_wrappers/TAO/TAO_IDL/be/be_global.cpp TAO/ACE_wrappers/TAO/TAO_IDL/be/be_global.cpp
--- TAO.org/ACE_wrappers/TAO/TAO_IDL/be/be_global.cpp	2010-03-25 21:28:08.000000000 +0000
+++ TAO/ACE_wrappers/TAO/TAO_IDL/be/be_global.cpp	2010-06-24 07:15:53.000000000 +0000
@@ -121,6 +121,7 @@
     gen_template_export_ (false),
     gen_ostream_operators_ (false),
     gen_custom_ending_ (true),
+    gen_unique_guards_(true),
     gen_ciao_svnt_ (false),
     gen_ciao_exec_idl_ (false),
     gen_ciao_exec_impl_ (false),
@@ -2172,6 +2173,18 @@
 }
 
 bool
+BE_GlobalData::gen_unique_guards (void) const
+{
+    return this->gen_unique_guards_;
+}
+
+void
+BE_GlobalData::gen_unique_guards (bool val)
+{
+  this->gen_unique_guards_ = val;
+}
+
+bool
 BE_GlobalData::gen_ciao_svnt (void) const
 {
   return this->gen_ciao_svnt_;
@@ -3177,6 +3190,11 @@
             // files from TAO specific include paths.
             be_global->gen_custom_ending (false);
           }
+         else if (av[i][2] == 'g')
+          {
+            // suppress generation of unique guards 
+            be_global->gen_unique_guards (false);
+          }
         else
           {
             ACE_ERROR ((
@@ -3907,6 +3925,11 @@
     ));
   ACE_DEBUG ((
       LM_DEBUG,
+      ACE_TEXT (" -Sg\t\t\tsuppress generating of unique header guards")
+      ACE_TEXT (" (unique guards are generated by default)\n")
+    ));
+  ACE_DEBUG ((
+      LM_DEBUG,
       ACE_TEXT (" -TS <value>\t\tset tab size for generated files")
       ACE_TEXT (" (default is 2 spaces)\n")
     ));
diff -Naur TAO.org/ACE_wrappers/TAO/TAO_IDL/be_include/be_global.h TAO/ACE_wrappers/TAO/TAO_IDL/be_include/be_global.h
--- TAO.org/ACE_wrappers/TAO/TAO_IDL/be_include/be_global.h	2010-03-25 21:28:08.000000000 +0000
+++ TAO/ACE_wrappers/TAO/TAO_IDL/be_include/be_global.h	2010-06-24 07:05:23.000000000 +0000
@@ -759,6 +759,10 @@
   bool gen_custom_ending (void) const;
   void gen_custom_ending (bool val);
 
+ /// Accessors for the member gen_unique_guards_.
+  bool gen_unique_guards (void) const;
+  void gen_unique_guards (bool val);
+
   /// Accessors for the corresponding members.
   bool gen_ciao_svnt (void) const;
   void gen_ciao_svnt (bool val);
@@ -1103,6 +1107,12 @@
    */
   bool gen_custom_ending_;
 
+ /**
+   * True by default, but a command line option can turn this off so
+   * the generated code (header) files will not be proteced by unique guards.
+   */
+  bool gen_unique_guards_;
+
   /// False by default, these flags trigger code generation
   /// formerly done by the CIAO CIDL compiler.
   bool gen_ciao_svnt_;
